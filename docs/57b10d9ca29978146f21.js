/*! For license information please see 57b10d9ca29978146f21.js.LICENSE.txt */
(self.webpackChunkaf_virtual_scroll=self.webpackChunkaf_virtual_scroll||[]).push([[177],{72140:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>q});var r=s(19756),o=s(67294),a=s(12938),l=s(68949);const n=(e,t,s,r)=>{const o=t.length-1;const a=t[o],l=new Map;for(let n of e){const e=s(n);if(!e)continue;let i,u,c=l;for(let s=0;s<o;s++){if(u=e[t[s]],i=c.get(u),!i){i=new Map;for(let e of r[s])c.has(e)||c.set(e,null);c.set(u,i)}c=i}if(u=e[a],i=c.get(u),i)i.push(n);else{for(let e of r[o])c.has(e)||c.set(e,null);c.set(u,[n])}}return l},i=(e,t,s)=>(r,o)=>{const a=e(r),l=e(o);if(a&&l){const e=a[t],r=l[t];return e>r?s:e<r?-s:0}return a?s:l?-s:0},u=(e,t,s,r,o,a=0)=>{const l=e.values();if(a<o-1)for(let e of l)e&&u(e,t,s,r,o,a+1);else{const e=i(t,s,r);for(let t of l)t&&t.sort(e)}},c=u,d=(e,t,s=[],r=[],o=[])=>{let a;for(let[l,n]of e)if(n){const e=s.concat(l);a=-r.push(e),o.push(a),t.has(a)||(Array.isArray(n)?o.push.apply(o,n):d(n,t,e,r,o))}return{groupValues:r,rowIndexes:o}},p=d,g=(e,t,s)=>{if(s.size){const r=[];e:for(let o,a=0;a<e;a++)if(o=t(a),o){for(const[e,t]of s)if(!(""+o[e]).toLowerCase().includes(t))continue e;r.push(a)}return r}return Array.from({length:e},((e,t)=>t))};const h=class{constructor(){this.rowsQuantity=0,this.getRowData=null,this.columns=[],this.compact=!0,this.filtersMap=new Map,this.groupKeys=[],this.sortDataKey="",this.sortDirection=-1,this.collapsedGroups=new Set}setFiltering(e,t){t?this.filtersMap.set(e,t.toLowerCase()):this.filtersMap.delete(e)}toggleCompact(){this.compact=!this.compact}setSorting(e){this.sortDataKey===e&&(this.sortDirection*=-1),this.sortDataKey=e}setGrouping(e){this.groupKeys=e}addGrouping(e){this.groupKeys.includes(e)||(this.groupKeys.push(e),this.collapsedGroups.clear())}toggleCollapsedGroup(e){this.collapsedGroups.has(e)?this.collapsedGroups.delete(e):this.collapsedGroups.add(e)}removeGrouping(e){const t=this.groupKeys.indexOf(e);-1!==t&&(this.groupKeys.splice(t,1),this.collapsedGroups.clear())}merge(e){Object.assign(this,e)}},m=()=>!1;const f=class extends h{get visibleColumns(){return this.columns.filter((e=>!this.groupKeys.includes(e.dataKey)))}get priorityGroupValuesArray(){return this.groupKeys.map((e=>this.columns.find((t=>t.dataKey===e)).priorityGroupValues||[]))}get grouped(){return n(this.filteredIndexes,this.groupKeys,this.getRowData,this.priorityGroupValuesArray)}get groupedSorted(){return this.sortDataKey&&c(this.grouped,this.getRowData,this.sortDataKey,this.sortDirection,this.groupKeys.length),this.grouped}get flattenedGroups(){return p(this.groupedSorted,this.collapsedGroups)}get filteredIndexes(){return g(this.rowsQuantity,this.getRowData,this.filtersMap)}get noGroupsSortedIndexes(){return this.sortDataKey?this.filteredIndexes.sort(i(this.getRowData,this.sortDataKey,this.sortDirection)):this.filteredIndexes}get groupsSortedIndexes(){return this.flattenedGroups.rowIndexes}get hasGrouping(){return!!this.groupKeys.length}get finalIndexes(){return this.hasGrouping?this.groupsSortedIndexes:this.noGroupsSortedIndexes}constructor(){super(),(0,l.rC)(this,{grouped:l.Fl,flattenedGroups:l.Fl,filteredIndexes:l.Fl,hasGrouping:l.Fl,visibleColumns:(0,l.Fl)({equals:l.p6.structural}),priorityGroupValuesArray:(0,l.Fl)({equals:l.p6.structural}),finalIndexes:(0,l.Fl)({equals:m}),noGroupsSortedIndexes:(0,l.Fl)({equals:m}),groupedSorted:(0,l.Fl)({equals:m}),rowsQuantity:!0,getRowData:!0,columns:!0,compact:!0,filtersMap:!0,groupKeys:!0,sortDataKey:!0,sortDirection:!0,collapsedGroups:!0,setFiltering:l.aD,toggleCompact:l.aD,setSorting:l.aD,setGrouping:l.aD,addGrouping:l.aD,toggleCollapsedGroup:l.aD,removeGrouping:l.aD,merge:l.aD})}};var y=s(14108),x=s(32857);const K="_2B3KY_2EhDdLzl3od9PxI3",G="_3xhCMieeqyydLLrsB_Rjwr _2S2SLB_JTzTB3lBY1T4ZW1",w="_7PdTV3zpJzO5l3JPCJbaz",D="_24CQvBWd2KIxalcwIBcG6S",v="_1Pfh0g4BE_cuNHu46ByRkY _2S2SLB_JTzTB3lBY1T4ZW1",b="_3KQQrpclW23r77-lYRKeHq _2S2SLB_JTzTB3lBY1T4ZW1",j="_2t1GlnfqduCsfI_X7Q0BSx _2S2SLB_JTzTB3lBY1T4ZW1",I="QsUrLMXUKybinaPXO0z0B";var C=s(5200),S=s(59240),R=s(85893);const _=(0,a.Pi)((({m:e,dataKey:t,label:s,i:r})=>{const[,o]=(0,C.c)((()=>({type:"h",item:{dataKey:t}})),[t]);return(0,R.jsxs)("div",{ref:o,className:G,onClick:()=>e.setSorting(t),"aria-sort":e.sortDataKey===t?1===e.sortDirection?"ascending":"descending":void 0,children:[0===r?(0,R.jsx)("span",{"data-collapsed":e.compact?"":void 0,onClick:()=>e.toggleCompact(),className:b}):null,s]})})),B=(0,a.Pi)((({m:e,dataKey:t})=>e.compact?null:(0,R.jsx)("input",{className:w,value:e.filtersMap.get(t)||"",onChange:s=>e.setFiltering(t,s.target.value)}))),L=e=>{let t=0;if(Array.isArray(e))t+=e.length;else for(let s of e.values())s&&(t+=L(s));return t},N=(e,t,s)=>{let r=0;if(Array.isArray(e)){let o;for(let a of e)o=s(a),o&&(r+=o[t])}else for(let o of e.values())o&&(r+=N(o,t,s));return r},F=(0,a.Pi)((({m:e,column:t,rowIndexes:s})=>{if("count"===t.totals)return L(s);if("sum"===t.totals){const r=N(s,t.dataKey,e.getRowData),o=t.formatTotal||t.format;return o?o(r):r}return null})),T=({groupKey:e,columns:t,onRemove:s})=>(0,R.jsx)("div",{className:v,onDoubleClick:s,children:t.find((t=>t.dataKey===e)).label}),Q=(0,a.Pi)((({m:e,GroupLabel:t})=>{const[s,r]=(0,S.L)((()=>({accept:"h",drop(t){e.addGrouping(t.dataKey)}})),[e]);return e.compact?null:(0,R.jsx)("div",{className:D,ref:r,children:e.groupKeys.length?e.groupKeys.map((s=>(0,R.jsx)(t,{groupKey:s,columns:e.columns,onRemove:()=>e.removeGrouping(s)},s))):"Drag column headers here to group by column"})})),A=(0,a.Pi)((({m:e,columns:t,idx:s})=>{const r=e.collapsedGroups.has(s);if(e.hasGrouping){const a=e.flattenedGroups.groupValues[~s];if(a){const l=a.length-1,n=e.groupKeys[l],{getGroupLabel:i,label:u,format:c}=e.columns.find((e=>e.dataKey===n)),d=a[l];return(0,R.jsxs)(o.Fragment,{children:[(0,R.jsx)("span",{className:j,onClick:()=>e.toggleCollapsedGroup(s),"data-collapsed":r?"":void 0,style:{marginLeft:2*l+"em"}})," ",i?i(d):(0,R.jsxs)(o.Fragment,{children:[u,": ",c?c(d):""+d]}),t.length?(0,R.jsx)("span",{className:I,children:t.map((t=>{return t.totals?(0,R.jsxs)("span",{children:[t.label,":  ",(0,R.jsx)(F,{m:e,column:t,rowIndexes:(s=e.grouped,r=a,r.reduce(((e,t)=>e.get(t)),s))})]},t.dataKey):null;var s,r}))}):null]})}}return null})),k=e=>{let{rowsQuantity:t,getRowData:s,className:a,columns:l,GroupLabel:n=T}=e,i=(0,r.Z)(e,["rowsQuantity","getRowData","className","columns","GroupLabel"]);const[u]=(0,o.useState)((()=>new f)),{finalIndexes:c}=u;(0,o.useEffect)((()=>u.merge({rowsQuantity:t,getRowData:s,columns:l})),[t,s,l]),(0,o.useEffect)((()=>{const e=u.visibleColumns.slice().sort(((e,t)=>(e.initialGrouingIndex||0)-(t.initialGrouingIndex||0))).filter((e=>e.initialGroupingIndex)).map((e=>e.dataKey));u.setGrouping(e)}),[]);return(0,R.jsxs)("div",{className:(0,x.Z)(K,a),children:[(0,R.jsx)(Q,{m:u,GroupLabel:n}),(0,R.jsx)(y.Z,Object.assign({columns:u.visibleColumns,rowsQuantity:c.length,getRowData:s,renderRow:(e,t)=>{const s=c[e];return s<0?(0,R.jsx)("tr",{children:(0,R.jsx)("td",{colSpan:t.columns.length,children:(0,R.jsx)(A,{m:u,idx:s,columns:t.columns})})},e):(0,o.createElement)(t.Row,Object.assign({},t,{key:e,index:s}))},renderHeaderCells:e=>e.map((({dataKey:e,label:t,minWidth:s},r)=>(0,R.jsxs)("th",{style:{minWidth:s},children:[(0,R.jsx)(_,{m:u,dataKey:e,label:t,i:r}),(0,R.jsx)(B,{m:u,dataKey:e})]},e))),renderTfootContent:e=>e.some((e=>!!e.totals))?(0,R.jsx)("tr",{children:e.map((e=>(0,R.jsx)("td",{children:(0,R.jsx)(F,{m:u,column:e,rowIndexes:u.filteredIndexes})},e.dataKey)))}):null},i))]})},M=(0,a.Pi)(k);var P=s(85384),z=s.n(P);const V=Array.from({length:1e4},((e,t)=>({i:t,fixedRange:t%9,firstName:z().name.firstName(),lastName:z().name.lastName(),country:z().address.country()}))),q=()=>(0,R.jsx)(M,{rowsQuantity:V.length,getRowData:e=>V[e],estimatedRowHeight:30,columns:[{dataKey:"i",label:"i",totals:"sum",render:e=>{return(0,R.jsx)("div",{style:{color:"#000",textAlign:"center",lineHeight:(t=e,20+t%53+t%87)+"px",background:`hsl(${11*e%360},60%,60%)`},children:e});var t}},{dataKey:"fixedRange",format:e=>`fr ${e}`,label:"FR",initialGroupingIndex:1,priorityGroupValues:[4,7,71,5]},{dataKey:"firstName",label:"first name",initialGroupingIndex:2,priorityGroupValues:["Dennis"],totals:"count"},{dataKey:"lastName",label:"last name"},{dataKey:"country",label:"country"}]})}}]);
//# sourceMappingURL=57b10d9ca29978146f21.js.map