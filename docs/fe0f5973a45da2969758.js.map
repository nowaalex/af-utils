{"version":3,"sources":["webpack://af-virtual-scroll/./src/components/List/index.js","webpack://af-virtual-scroll/./src/components/common/Rows/style.module.scss?bf14","webpack://af-virtual-scroll/./src/components/common/Rows/index.js","webpack://af-virtual-scroll/./src/examples/list/loadOnDemand/index.js"],"names":["List","children","props","model","memo","Events","START_INDEX","END_INDEX","spacerKey","Math","random","toString","Spacer","rest","useSubscription","startIndex","endIndex","virtualTopOffset","setSpacerNode","result","className","css","aria-hidden","style","height","ref","i","push","posts","setPosts","useState","isLoading","setLoading","rangeEndMoveHandler","useCallback","async","rowsQuantity","images","Promise","resolve","setTimeout","Array","from","length","faker","p","concat","onRangeEndMove","src"],"mappings":";4MAMA,MAAMA,EAAO,QAAC,SAAEC,GAAH,EAAgBC,GAAhB,8BACT,SAAC,IAAD,iBAAeA,EAAf,UACKC,IAAS,SAAC,IAAD,CAAMA,MAAOA,EAAb,SAAqBF,QAYvC,GAAeG,UAAMJ,I,mFCnBrB,SAAgB,OAAS,2B,eCGzB,MAAMK,EAAS,CAAEC,KAAaC,MAExBC,EAAYC,KAAKC,SAASC,SAAS,IAyBzC,EAvBa,QAAC,MAAER,EAAF,SAASF,EAAT,OAAmBW,EAAS,OAA7B,EAAuCC,GAAvC,+CAAkDC,OAC3DX,GACA,EAAGY,aAAYC,WAAUC,mBAAkBC,oBAEvC,MAAMC,EAAS,EACX,SAACP,EAAD,CAEIQ,UAAWC,UACXC,cAAY,OACZC,MAAO,CAAEC,OAAQP,GACjBQ,IAAKP,GAJAV,IAQb,IAAK,IAAIkB,EAAIX,EAAYW,EAAIV,EAAUU,IACnCP,EAAOQ,KAAK1B,EAAUyB,EAAGb,IAG7B,OAAOM,IAEXd,K,mHCxBJ,MAmCA,EA1Bc,KAEV,MAAQuB,EAAOC,IAAaC,cAAS,KAC7BC,EAAWC,IAAeF,eAAU,GAEtCG,GAAsBC,kBAAaC,OAASC,eAAcpB,eAC5D,GAAIoB,IAAiBpB,EAAU,CAC3BgB,GAAY,GACZ,MAAMK,QAjBe,IAAIC,SAASC,GAAWC,WACrDD,EACA,IACAE,MAAMC,KAAK,CAAEC,OAAQ,IAAK,IAAM,CAC5BC,kBACAA,6BAaIf,GAAUgB,GAAKA,EAAEC,OAAQT,KACzBL,GAAY,MAEjB,IAEH,OACI,SAAC,IAAD,CAAMI,aAAcR,EAAMe,OAAQI,eAAgBhB,EAAY,KAAOE,EAArE,SACKP,IACG,4BACI,gBAAKsB,IAAKpB,EAAMF,GAAG,MACnB,uBAAIE,EAAMF,GAAG,OAFPA","file":"fe0f5973a45da2969758.js","sourcesContent":["import { memo } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nimport Rows from \"../common/Rows\";\r\nimport Container from \"../common/Container\";\r\n\r\nconst List = ({ children, ...props }) => (\r\n    <Container {...props}>\r\n        {model => <Rows model={model}>{children}</Rows>}\r\n    </Container>\r\n);\r\n\r\nList.propTypes = {\r\n    /**\r\n     * @param {number} rowIndex\r\n     * @returns {any} one row element child. Fragments are not supported.\r\n     */\r\n    children: PropTypes.func.isRequired\r\n}\r\n\r\nexport default memo( List );","// extracted by mini-css-extract-plugin\nexport default {\"spacer\":\"_2q9_Y-5hrbxfXeVDNj4Bxk\"};","import useSubscription from \"hooks/useSubscription\";\r\nimport { START_INDEX, END_INDEX } from \"constants/events\";\r\nimport css from \"./style.module.scss\";\r\n\r\nconst Events = [ START_INDEX, END_INDEX ];\r\n\r\nconst spacerKey = Math.random().toString(36);\r\n\r\nconst Rows = ({ model, children, Spacer = \"div\", ...rest }) => useSubscription(\r\n    model, \r\n    ({ startIndex, endIndex, virtualTopOffset, setSpacerNode }) => {\r\n\r\n        const result = [\r\n            <Spacer\r\n                key={spacerKey}\r\n                className={css.wrapper}\r\n                aria-hidden=\"true\"\r\n                style={{ height: virtualTopOffset}}\r\n                ref={setSpacerNode}\r\n            />\r\n        ];    \r\n        \r\n        for( let i = startIndex; i < endIndex; i++ ){\r\n            result.push(children( i, rest ));\r\n        }\r\n\r\n        return result;\r\n    },\r\n    Events\r\n);\r\n\r\nexport default Rows;","import { useState, useCallback } from \"react\";\nimport faker from \"faker\";\nimport { List } from \"af-virtual-scroll\";\n\nconst fetchArrayOfImages = () => new Promise( resolve => setTimeout(\n    resolve,\n    200,\n    Array.from({ length: 5 }, () => [\n        faker.image.image(),\n        faker.lorem.paragraphs()\n    ])\n));\n\nconst Posts = () => {\n\n    const [ posts, setPosts ] = useState([]);\n    const [ isLoading, setLoading ] = useState( false );\n\n    const rangeEndMoveHandler = useCallback( async ({ rowsQuantity, endIndex }) => {\n        if( rowsQuantity === endIndex ){\n            setLoading( true );\n            const images = await fetchArrayOfImages();\n            setPosts( p => p.concat( images ) );\n            setLoading( false );\n        }\n    }, []);\n\n    return (\n        <List rowsQuantity={posts.length} onRangeEndMove={isLoading ? null : rangeEndMoveHandler}>\n            {i => (\n                <div key={i}>\n                    <img src={posts[i][0]} />\n                    <p>{posts[i][1]}</p>\n                </div>\n            )}\n        </List>\n    );\n}\n\nexport default Posts;"],"sourceRoot":""}